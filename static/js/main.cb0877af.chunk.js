(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,a,t){e.exports=t(55)},32:function(e,a,t){},34:function(e,a,t){},55:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(25),i=t.n(r),s=(t(32),t(2)),o=t(3),u=t(6),c=t(4),d=t(5),m=t(1),h=(t(34),t(14)),b=t(12),p=function(e){function a(){return Object(s.a)(this,a),Object(u.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"options data-entry-subsection"},l.a.createElement("h3",null,"Options"),l.a.createElement(b.CheckboxGroup,{className:"checkbox-group",checkboxDepth:2,name:"options",value:this.props.options,onChange:this.props.onOptionsChange},l.a.createElement("label",null,l.a.createElement(b.Checkbox,{value:"kidsTable"})," Kids' Table"),l.a.createElement("label",null,l.a.createElement(b.Checkbox,{value:"changeTables"})," Always Change Tables"),l.a.createElement("label",null,l.a.createElement(b.Checkbox,{value:"changePeople"})," Play With Different People")))}}]),a}(n.Component),g=function(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-label"},e.title),l.a.createElement("input",{className:"form-input ".concat(e.classNames),name:e.name,type:e.inputType,min:e.min,max:e.max,value:e.content,onChange:e.controlFunc,placeholder:e.placeholder}))},y=function(e){function a(){return Object(s.a)(this,a),Object(u.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderKidsCount",value:function(){var e=this.props,a=e.totalKids,t=e.handleNumKidsChange;return l.a.createElement(g,{inputType:"number",title:"Number of Kids: ",name:"totalKids",controlFunc:t,content:a})}},{key:"render",value:function(){var e=this.props,a=e.totalPlayers,t=e.totalRounds,n=e.handleNumPlayersChange,r=e.handleNumRoundsChange,i=e.isKidsTable;return l.a.createElement("div",{className:"details data-entry-subsection"},l.a.createElement("h3",null,"Details"),l.a.createElement(g,{inputType:"number",title:"Number of Players: ",name:"totalPlayers",controlFunc:n,content:a}),l.a.createElement(g,{inputType:"number",title:"Number of Rounds: ",name:"totalRounds",controlFunc:r,content:t}),i&&this.renderKidsCount())}}]),a}(n.Component),f=t(15),T=function(e){function a(){return Object(s.a)(this,a),Object(u.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderRunUntilConstraints",value:function(){var e=this.props.options,a=e.includes("changePeople"),t=e.includes("changeTables");return l.a.createElement("div",null,a&&this.renderMaxPlayedWithAllowedInput(),a&&this.renderMaxAveragePlayedWithAllowedInput(),t&&this.renderMinUniqueTablesAllowedInput(),t&&this.renderMaxRunsInput())}},{key:"renderMaxPlayedWithAllowedInput",value:function(){var e=this.props,a=e.totalRounds,t=e.maxPlayedWithAllowed,n=e.handleNumberChange;return l.a.createElement(g,{inputType:"number",title:"Max number of plays with same person allowed: ",name:"maxPlayedWithAllowed",controlFunc:function(e){return n(e,"maxPlayedWithAllowed")},content:t,max:a,min:1})}},{key:"renderMaxAveragePlayedWithAllowedInput",value:function(){var e=this.props,a=e.totalRounds,t=e.maxAveragePlayedWithAllowed,n=e.handleNumberChange;return l.a.createElement(g,{inputType:"number",title:"Max allowed average number of plays with same person: ",name:"maxAveragePlayedWithAllowed",controlFunc:function(e){return n(e,"maxAveragePlayedWithAllowed")},content:t,max:a,min:1})}},{key:"renderMinUniqueTablesAllowedInput",value:function(){var e=this.props,a=e.totalRounds,t=e.minUniqueTablesAllowed,n=e.handleNumberChange;return l.a.createElement(g,{inputType:"number",title:"Minimum allowed number of unique tables visited: ",name:"minUniqueTablesAllowed",controlFunc:function(e){return n(e,"minUniqueTablesAllowed")},content:t,max:a,min:1})}},{key:"renderMaxRunsInput",value:function(){var e=this.props,a=e.maxRuns,t=e.handleNumberChange;return l.a.createElement(g,{inputType:"number",title:"Max times to run: ",name:"maxRuns",controlFunc:function(e){return t(e,"maxRuns")},content:a,max:1e4,min:1})}},{key:"renderRunXTimesInput",value:function(){var e=this.props,a=e.numTimesToRun,t=e.handleNumberChange;return l.a.createElement(g,{inputType:"number",title:"Number of times to run: ",name:"numTimesToRun",controlFunc:function(e){return t(e,"numTimesToRun")},content:a,max:1e4,min:1})}},{key:"render",value:function(){return l.a.createElement("div",{className:"constraints"},"runUntilConstraints"===this.props.algorithmChoice&&this.renderRunUntilConstraints(),"runRandomXTimes"===this.props.algorithmChoice&&this.renderRunXTimesInput())}}]),a}(n.Component),v=function(e){function a(){return Object(s.a)(this,a),Object(u.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"data-entry-section"},l.a.createElement("h3",null,"Algorithm Options"),l.a.createElement(f.RadioGroup,{onChange:this.props.handleAlgorithmChange,value:this.props.algorithmChoice,className:"radio-button"},l.a.createElement(f.RadioButton,{value:"runRandomXTimes",css:{width:"100%"}},"Best of X Random Runs"),l.a.createElement(f.RadioButton,{value:"runUntilConstraints"},"Run Until Custom Constraints Met")),l.a.createElement(T,{algorithmChoice:this.props.algorithmChoice,totalRounds:this.props.totalRounds,options:this.props.options,numTimesToRun:this.props.numTimesToRun,maxPlayedWithAllowed:this.props.maxPlayedWithAllowed,maxAveragePlayedWithAllowed:this.props.maxAveragePlayedWithAllowed,minUniqueTablesAllowed:this.props.minUniqueTablesAllowed,maxRuns:this.props.maxRuns,handleNumberChange:this.props.handleNumberChange}))}}]),a}(n.Component),C=t(9),O=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(c.a)(a).call(this,e))).handleTableNameChange=t.handleTableNameChange.bind(Object(m.a)(Object(m.a)(t))),t.handleTableSizeChange=t.handleTableSizeChange.bind(Object(m.a)(Object(m.a)(t))),t.handleTableGamesChange=t.handleTableGamesChange.bind(Object(m.a)(Object(m.a)(t))),t.addTableRow=t.addTableRow.bind(Object(m.a)(Object(m.a)(t))),t.removeTable=t.removeTable.bind(Object(m.a)(Object(m.a)(t))),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"handleTableNameChange",value:function(e){var a=this.props,t=a.tables,n=a.handleTablesChange,l=e.target.value,r=parseInt(e.target.parentNode.parentNode.id);n(t.map(function(e){return e.id===r?Object(C.a)({},e,{name:l}):e}))}},{key:"handleTableSizeChange",value:function(e){var a=this.props,t=a.tables,n=a.handleTablesChange,l=parseInt(e.target.value)?parseInt(e.target.value):0,r=parseInt(e.target.parentNode.parentNode.id);n(t.map(function(e){return e.id===r?Object(C.a)({},e,{size:l}):e}))}},{key:"handleTableGamesChange",value:function(e){var a=this.props,t=a.tables,n=a.handleTablesChange,l=e.target.value.split(","),r=parseInt(e.target.parentNode.parentNode.id);n(t.map(function(e){return e.id===r?Object(C.a)({},e,{games:l}):e}))}},{key:"removeTable",value:function(e){var a=this.props,t=a.tables,n=a.handleTablesChange,l=parseInt(e.target.parentNode.id);n(t.filter(function(e){return e.id!==l}))}},{key:"addTableRow",value:function(){var e=this.props,a=e.tables,t=e.handleTablesChange,n=a.length+1,l="Table "+n;t(a.concat({id:n,name:l,size:4,games:[]}))}},{key:"renderTableRows",value:function(){var e=this,a=this.props.tables;return l.a.createElement("ol",{className:"table-list"},a.map(function(a){return e.renderTableRow(a)}))}},{key:"renderTableRow",value:function(e){return l.a.createElement("li",{key:e.id,id:e.id,className:"table-row"},l.a.createElement(g,{inputType:"text",title:"Name: ",name:"tableName",controlFunc:this.handleTableNameChange,content:e.name}),l.a.createElement(g,{inputType:"number",title:"Size: ",name:"tableSize",controlFunc:this.handleTableSizeChange,content:e.size}),l.a.createElement(g,{inputType:"text",classNames:"game-input",title:"Games: ",name:"tableGames",controlFunc:this.handleTableGamesChange,content:e.games.toString()}),l.a.createElement("button",{type:"button",className:"remove-button",onClick:this.removeTable},"X"))}},{key:"render",value:function(){return l.a.createElement("div",{className:"tables"},l.a.createElement("h3",null,"Tables"),l.a.createElement("p",{style:{padding:"0 1rem",marginTop:0}},"(Optional) Please enter a comma-separated list of games for each round"),this.renderTableRows(),l.a.createElement("button",{type:"button",className:"button",onClick:this.addTableRow},"Add Table"))}}]),a}(n.Component),R=t(10),N=[],w=[],j=0,P=0,x=[],E={},A="",W={};function k(e){return function(e){j=e.totalRounds,P=e.totalPlayers,x=e.tables,E={kidsTable:e.kidsTable,changePeople:e.changePeople,changeTables:e.changeTables},N=S(),w=M(),A=e.algorithmChoice,W={numTimesToRun:e.numTimesToRun,maxPlayedWithAllowed:e.maxPlayedWithAllowed,maxAveragePlayedWithAllowed:e.maxAveragePlayedWithAllowed,minUniqueTablesAllowed:e.minUniqueTablesAllowed,maxRuns:e.maxRuns}}(e),function(){var e;switch(w=M(),N.sort(function(e,a){return.5-Math.random()}),w.sort(function(e,a){return.5-Math.random()}),A){case"runRandomXTimes":e=F(W.numTimesToRun);break;case"runUntilConstraints":e=function(){var e=!1,a={playerList:[],maxPlayedWithCount:100,averageMaxPlayedWithCount:100,minUniqueTablesVisited:0},t=0;for(;!e&&t<W.maxRuns;)a=q(a),e=U(a),t++;return a}();break;default:e=F(W.numTimesToRun)}return console.log("RESULT",e),e}()}function S(){for(var e=[],a=0;a<P;a++){var t={id:a,assignedTables:[],uniqueTables:0,playedWithCount:0,playedWith:new Array(P).fill(0,0)};e.push(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(e))}function M(){var e=x.map(function(e){return Object(C.a)({},e,{currentPlayers:[],isFull:!1})});return JSON.parse(JSON.stringify(e))}function U(e){var a=W,t=a.maxPlayedWithAllowed,n=a.maxAveragePlayedWithAllowed,l=a.minUniqueTablesAllowed,r=K(e.playerList),i=z(e.playerList),s=I(e.playerList);return r<=t&&i<=n&&s>=l}function q(e){return w=M(),N=S(),function(e,a){var t=I(e),n=K(e),l=z(e),r=!E.changePeople||n<=a.maxPlayedWithCount,i=!E.changePeople||l<=a.averageMaxPlayedWithCount,s=!E.changeTables||t>a.minUniqueTablesVisited;return r&&i&&s?{playerList:e,maxPlayedWithCount:n,averageMaxPlayedWithCount:l,minUniqueTablesVisited:t}:a}(function(e){for(var a=0;a<e;a++)w.forEach(function(e){e.isFull=!1,e.currentPlayers=[]}),N.sort(function(e,a){return.5-Math.random()}),w.sort(function(e,a){return.5-Math.random()}),N.forEach(function(e){var a=w.find(function(e){return!e.isFull});e.assignedTables.includes(a.id)||e.uniqueTables++,e.assignedTables.push(a.id),a.currentPlayers.push(e),a.currentPlayers.length===a.size&&(a.isFull=!0),a.currentPlayers.forEach(function(a){e.id!==a.id&&(e.playedWith[a.id]++,a.playedWith[e.id]++,e.playedWithCount++)})});return JSON.parse(JSON.stringify(N))}(j),e)}function F(e){for(var a={playerList:[],maxPlayedWithCount:100,averageMaxPlayedWithCount:100,minUniqueTablesVisited:0},t=0;t<e;t++)a=q(a);return a}function I(e){return Math.min.apply(Math,Object(R.a)(new Set(e.map(function(e){return Object(R.a)(new Set(e.assignedTables)).length}))))}function K(e){return Math.max.apply(Math,Object(R.a)(e.map(function(e){return Math.max.apply(Math,Object(R.a)(e.playedWith))})))}function z(e){return(a=e.map(function(e){return Math.max.apply(Math,Object(R.a)(e.playedWith))})).reduce(function(e,a){return a+e})/a.length;var a}var J={firstRun:!0,options:["changePeople","changeTables"],totalPlayers:10,totalRounds:4,totalKids:0,algorithmChoice:"runRandomXTimes",numTimesToRun:500,maxPlayedWithAllowed:4,maxAveragePlayedWithAllowed:4,minUniqueTablesAllowed:1,maxRuns:1e4,tables:[{id:1,name:"Table 1",size:2,games:[]},{id:2,name:"Table 2",size:2,games:[]},{id:3,name:"Table 3",size:3,games:[]},{id:4,name:"Table 4",size:3,games:[]}],result:{}},L=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(c.a)(a).call(this,e))).handleOptionsChange=function(e){t.setState({options:e})},t.handleNumPlayersChange=function(e){t.setState({totalPlayers:parseInt(e.target.value)?parseInt(e.target.value):0})},t.handleNumRoundsChange=function(e){t.setState({totalRounds:parseInt(e.target.value)?parseInt(e.target.value):0})},t.handleNumKidsChange=function(e){t.setState({totalKids:parseInt(e.target.value)?parseInt(e.target.value):0})},t.handleNumberChange=function(e,a){t.setState(Object(h.a)({},a,parseInt(e.target.value)?parseInt(e.target.value):0))},t.handleAlgorithmChange=function(e){t.setState({algorithmChoice:e})},t.handleTablesChange=function(e){t.setState({tables:e})},t.handleClearForm=function(e){e.preventDefault(),t.setState(JSON.parse(JSON.stringify(J)))},t.handleFormSubmit=function(e){e.preventDefault();var a={changePeople:t.state.options.includes("changePeople"),changeTables:t.state.options.includes("changeTables"),kidsTable:t.state.options.includes("kidsTable"),totalPlayers:t.state.totalPlayers,totalRounds:t.state.totalRounds,totalKids:t.state.options.includes("kidsTable")?t.state.totalKids:0,algorithmChoice:t.state.algorithmChoice,numTimesToRun:t.state.numTimesToRun,maxPlayedWithAllowed:t.state.maxPlayedWithAllowed,maxAveragePlayedWithAllowed:t.state.maxAveragePlayedWithAllowed,minUniqueTablesAllowed:t.state.minUniqueTablesAllowed,maxRuns:t.state.maxRuns,numTables:t.state.tables.length,tables:t.state.tables};console.log("Send this in a POST request:",a);var n=a.tables.reduce(function(e,a){return e+a.size},0);if(a.totalPlayers!==n)throw new Error("Number of players must match number of table spots");var l=k(a);t.props.handleTablesReady(t.state.tables),t.props.handleResultReady(l),t.setState({firstRun:!1})},t.handleOptionsChange=t.handleOptionsChange.bind(Object(m.a)(Object(m.a)(t))),t.handleNumPlayersChange=t.handleNumPlayersChange.bind(Object(m.a)(Object(m.a)(t))),t.handleNumRoundsChange=t.handleNumRoundsChange.bind(Object(m.a)(Object(m.a)(t))),t.handleNumKidsChange=t.handleNumKidsChange.bind(Object(m.a)(Object(m.a)(t))),t.handleNumberChange=t.handleNumberChange.bind(Object(m.a)(Object(m.a)(t))),t.handleAlgorithmChange=t.handleAlgorithmChange.bind(Object(m.a)(Object(m.a)(t))),t.handleTablesChange=t.handleTablesChange.bind(Object(m.a)(Object(m.a)(t))),t.handleClearForm=t.handleClearForm.bind(Object(m.a)(Object(m.a)(t))),t.handleFormSubmit=t.handleFormSubmit.bind(Object(m.a)(Object(m.a)(t))),t.state=JSON.parse(JSON.stringify(J)),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.state,a=e.options,t=e.totalPlayers,n=e.totalRounds,r=e.totalKids,i=e.algorithmChoice,s=e.numTimesToRun,o=e.maxPlayedWithAllowed,u=e.maxAveragePlayedWithAllowed,c=e.minUniqueTablesAllowed,d=e.maxRuns,m=e.tables;return l.a.createElement("div",{className:"column"},l.a.createElement("h2",{className:"heading"},"Enter Your Data"),l.a.createElement("div",{className:"data-entry-section-with-subsections"},l.a.createElement(p,{className:"data-entry-subsection",options:a,onOptionsChange:this.handleOptionsChange}),l.a.createElement(y,{className:"data-entry-subsection",isKidsTable:!!a.includes("kidsTable"),totalPlayers:t,totalRounds:n,totalKids:r,handleNumPlayersChange:this.handleNumPlayersChange,handleNumRoundsChange:this.handleNumRoundsChange,handleNumKidsChange:this.handleNumKidsChange})),l.a.createElement(v,{algorithmChoice:i,totalRounds:n,options:a,numTimesToRun:s,maxPlayedWithAllowed:o,maxAveragePlayedWithAllowed:u,minUniqueTablesAllowed:c,maxRuns:d,handleAlgorithmChange:this.handleAlgorithmChange,handleNumberChange:this.handleNumberChange}),l.a.createElement(O,{className:"data-entry-section",tables:m,handleTablesChange:this.handleTablesChange}),l.a.createElement("button",{type:"submit",className:"button run-button",onClick:this.handleFormSubmit},this.state.firstRun?"Run":"Run Again"),l.a.createElement("button",{className:"button",onClick:this.handleClearForm},"Clear Form"))}}]),a}(n.Component),D=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(c.a)(a).call(this,e))).download=function(){var e=t.formatData(t.props.result.playerList.sort(function(e,a){return e.id-a.id})),a=btoa(e),n="data:text/octet-stream;base64,".concat(a),l=document.createElement("a");l.href=n,l.setAttribute("download","gamefest.txt"),l.click()},t.toBijective=function(e){return(e>26?t.toBijective(Math.floor((e-1)/26)):"")+((e%26||26)+9).toString(36).toUpperCase()},t.formatData=function(e){var a="";return e.forEach(function(e){var n="Player ".concat(t.toBijective(e.id+1)),l="";e.assignedTables.forEach(function(e,a){var n=t.props.tables.find(function(a){return a.id===e}),r=n.games[a]&&n.games[a].trim();l+="Round ".concat(a+1,": ").concat(n.name).concat(r?" - ".concat(r):"","\n")}),a+="".concat(n,"\n").concat(l,"\n\n")}),a},t.renderPlayerRow=t.renderPlayerRow.bind(Object(m.a)(Object(m.a)(t))),t.renderTableRow=t.renderTableRow.bind(Object(m.a)(Object(m.a)(t))),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderPlayerRow",value:function(e){var a=this;return l.a.createElement("li",{key:e.id,className:"result-list-item"},l.a.createElement("p",null,"Player ",e.id+1,":"),l.a.createElement("ol",null,e.assignedTables.map(function(t,n){return a.renderTableRow(e.id,n,t)})))}},{key:"renderTableRow",value:function(e,a,t){var n=this.props.tables.find(function(e){return e.id===t});return l.a.createElement("li",{key:e+"-"+a,className:"result-list-item"},n.name," (",n.size,")")}},{key:"renderPlayedWith",value:function(e){return e.map(function(e){return l.a.createElement("li",null,e.id," ",e.playedWithCount)})}},{key:"render",value:function(){var e=this,a=this.props.result;return l.a.createElement("div",{className:"column-right"},l.a.createElement("h2",{className:"heading"},"Results"),l.a.createElement("p",null,"Max of Everyone's Max Times Played With Someone: ",a.maxPlayedWithCount),l.a.createElement("p",null,"Average of Everyone's Max Times Played With Someone: ",Math.round(100*a.averageMaxPlayedWithCount)/100),l.a.createElement("p",null,"Minimum Number of Unique Tables Visited: ",a.minUniqueTablesVisited),l.a.createElement("button",{onClick:function(){return e.download()},className:"download-button"},"Download This Result"),l.a.createElement("ol",null,a.playerList.length>0&&a.playerList.sort(function(e,a){return e.id-a.id}).map(function(a){return e.renderPlayerRow(a)})))}}]),a}(n.Component),G=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(c.a)(a).call(this,e))).handleResultReady=function(e){t.setState({result:e})},t.handleTablesReady=function(e){t.setState({tables:e})},t.handleResultReady=t.handleResultReady.bind(Object(m.a)(Object(m.a)(t))),t.handleTablesReady=t.handleTablesReady.bind(Object(m.a)(Object(m.a)(t))),t.state={result:{playerList:[],maxPlayedWithCount:0,averageMaxPlayedWithCount:0,minUniqueTablesVisited:0}},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"GameFest"),l.a.createElement("div",{className:"App-body"},l.a.createElement("div",{className:"left-pane"},l.a.createElement(L,{handleResultReady:this.handleResultReady,handleTablesReady:this.handleTablesReady})),l.a.createElement("div",{className:"right-pane"},l.a.createElement(D,{result:this.state.result,tables:this.state.tables}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.cb0877af.chunk.js.map